{
  "permissions": {
    "allow": [
      "Bash(dotnet restore:*)",
      "Bash(dotnet build:*)",
      "Bash(chmod:*)",
      "Bash(for rid in osx-x64 osx-arm64 linux-x64 linux-arm64)",
      "Bash(do)",
      "Bash(src=\"/Users/attila/workspaces/bamldotnet/bindings/Baml.Net.Native.$rid/runtimes/$rid/native\")",
      "Bash(if [ -d \"$src\" ])",
      "Bash(then)",
      "Bash(fi)",
      "Bash(done)",
      "Bash(find:*)",
      "Bash(tree:*)",
      "Bash(if [ -d \"/Users/attila/workspaces/bamldotnet/runtimes/$rid/native\" ])",
      "Bash(curl:*)",
      "Bash(./scripts/download-natives.sh:*)",
      "Bash(brew list:*)",
      "Bash(brew install:*)",
      "Bash(python3:*)",
      "Bash(rsvg-convert:*)",
      "Bash(unzip:*)",
      "Bash(dotnet pack:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(dotnet test:*)",
      "Bash(git checkout:*)",
      "Bash(git add:*)",
      "Bash(ai)",
      "Bash(llm)",
      "Bash(agent)",
      "Bash(agentic)",
      "Bash(git push:*)",
      "Bash(gh pr create --title \"Modernize project structure and native package configuration\" --body \"$(cat <<''EOF''\n## Summary\n\nComprehensive refactoring to improve maintainability, align with .NET best practices, and modernize the build system.\n\n## Key Changes\n\n### ðŸ—ï¸ Project Structure\n- **Reorganized** native packages from `src/Native/` â†’ `bindings/`\n- **Created** `bindings/Directory.Build.props` for centralized configuration\n- **Simplified** native .csproj files: 42 lines â†’ 13 lines each\n- **Added** `scripts/` directory for build scripts\n- **Added** `assets/` directory for package branding\n\n### ðŸ“¦ Package Configuration\n- **Implemented** buildTransitive for modern PackageReference support\n- **Removed** legacy packages.config support (build/ folders)\n- **Centralized** package version management with `Directory.Packages.props`\n- **Added** Apache 2.0 LICENSE from BoundaryML/baml repository\n- **Configured** artifacts output: `artifacts/nuget/`\n\n### âš™ï¸ Build System\n- **Added** `global.json` to pin .NET SDK version (9.0.300)\n- **Updated** version strategy: Version (1.0.0.0) separate from BamlNativeVersion (0.212.0)\n- **Added** InvariantGlobalization: true\n\n### ðŸ§ª Test Infrastructure\n- **Migrated** BAML test files from gitignored directories to test project\n- **Added** `TestData/BamlFiles/` (3 integration test files)\n- **Integrated** `TestBamlSrc/` (119 comprehensive test files + media)\n- **Updated** test paths to use output directory references\n\n## Benefits\n\nâœ… **Maintainability**: Reduced code duplication by 70% in native packages  \nâœ… **Modern .NET**: buildTransitive support for proper dependency flow  \nâœ… **Self-contained tests**: No external dependencies, all files version controlled  \nâœ… **Better organization**: Clear separation of concerns (bindings/, scripts/, assets/)  \nâœ… **Easier onboarding**: Simpler project structure, centralized configuration  \n\n## Package Structure\n\n### Main Package (Baml.Net.nupkg)\n```\nâ”œâ”€â”€ LICENSE (Apache 2.0)\nâ”œâ”€â”€ logo.png\nâ””â”€â”€ lib/net9.0/Baml.Net.dll\n```\n\n### Native Packages (e.g., Baml.Net.Native.osx-x64.nupkg)\n```\nâ”œâ”€â”€ runtimes/osx-x64/native/libbaml_cffi.dylib\nâ””â”€â”€ buildTransitive/Baml.Net.Native.targets\n```\n\n## Verification\n\n### Build Status\n- âœ… Solution builds successfully\n- âœ… All 6 native packages generate correctly\n- âœ… All 92 tests pass (46 seconds)\n- âœ… Packages output to `artifacts/nuget/`\n\n### Changed Files\n- **45 files changed**: +875 insertions, -375 deletions\n- **Created**: 20 new files (bindings, configs, assets)\n- **Deleted**: 12 old native package files\n- **Modified**: 13 files (configs, tests, solution)\n\n## Testing Instructions\n\n```bash\n# Build the solution\ndotnet build\n\n# Run all tests\ndotnet test\n\n# Pack packages\ndotnet pack\n\n# Check artifacts\nls artifacts/nuget/\n```\n\n## Migration Notes\n\n### Breaking Changes\n- Native packages moved from `src/Native/` to `bindings/`\n- Package output now in `artifacts/nuget/` instead of `bin/Debug/`\n- Native packages no longer support packages.config (buildTransitive only)\n\n### No Impact On\n- Public API surface\n- Package consumption via PackageReference\n- Runtime behavior\n- Test functionality\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\nEOF\n)\")",
      "Bash(.gitignore)",
      "Bash(git commit:*)",
      "Bash(gh pr view:*)",
      "Bash(git pull:*)",
      "Bash(git stash:*)"
    ],
    "deny": [],
    "ask": []
  }
}
